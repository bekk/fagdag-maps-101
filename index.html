
<!DOCTYPE html>
<html>
  <head>
    <title>Maps 101 - BEKK Hackathon 31.10.2014</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
      @import url(http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">
#Maps 101
##Torgeir Thoresen og Rolf Erik Paulsen
###Hackathon, 31.oktober 2014
---
#GIS - Geografiske Informasjonssystemer
Samlebetegnelse for all systembehandling som har med geografiske (romlige) data å gjøre

###Wikipedia-definisjon av GIS
"*datamaskinbaserte systemer som brukes til å registrere, modellere, lagre, hente, manipulere, analysere og presentere geografisk refererte data*"
---
#Hovedkomponenter i GIS-stacken
Lage en skisse for dette!
##Kartdata
Raster/Vektor
Lagres på disk, eller i database (evt også søkemotorer som Solr)
Snakk om leverandører; kartverket - osm - google 
##Kartserver
GeoServer, GeoWebCache, ArcGis Server, MapServer
Todo: Finn ut nøyaktig hva Google og OSM bruker
##Kartklient
Henter data fra kartserver, og viser til brukeren - enten i standalone app eller i webleser
Leaflet, OpenLayers, Google, ArcGis
---
#Oppgave: Vi starter med et kart hvor hele stacken er på plass
1. git clone git@github.com:bekk/fagdag-maps-101.git
2. http://nodejs.org/dist/v0.10.32/node-v0.10.32.pkg
3. npm install
4. npm run watch

Torgeir går igjennom, og viser forskjell mellom Leaflet og OpenLayers
Viser to stk bakgrunnskart (uten marker og popup)

Torgeir forklarer oppsett av JavaScript og css m.m
---
#Kartstacken; kartdata
##Raster og Vektor-data
eksempler på hver
raster: geotiff, ordinære bilder etc
vektor: shapefile, geojson, gml, json...
---
#Kartstacken; kartserver
Kartservere:
GeoServer, GeoWebCache, ArcGis Server, MapServer: Kort gjennomgang av hver.. (tabell?)

Data som leveres:
Hovedforskjellen mellom WMS vs Tiles
<img src="img/tiles-inndeling.png"/>
VISE SPØRRINGENE I NETTLESEREN FOR TILES 
---
#Kartstacken; klienter
OpenLayers, Leaflet, ArcGisClient, 

---
#Hvordan angi en posisjon på kloden?
##WGS World Geodetic System - WGS 84
Dette er latitude og longitude (samt altitude) som vi i dag kjenner det fra våre GPSer. Utgangspunktet for beregningen er jordens senter.
<br><br>
<div align="center">
<img src="img/globe.jpg" align="center">
</div>
---
#Hvordan angi en posisjon på et flatt kart?
##Svar: Projeksjon
*Kartprojeksjon er den metode man bruker når man på et kart skal overføre Jordens eller et annet rundt himmellegemes overflatetrekk til et flatt kart.*


**Problemstilling
Rund jord -> flat skjerm/papir
<br><br>
<div align="center">
<img src="img/projeksjoner.jpg">
</div>
???

Projections are what we call the mathematical equations that do the trick of turning the world into some flat shape that fits on a printout or a computer screen. 
It’s a messy task to do, this transformation - there’s no way to smoosh the world onto a screen without distorting it in some way. 
You either lose direction, or relative size, or come out with something very weird looking.

???

---
#WebMercator projeksjon
Dette er "defacto"-standard for projeksjon i webapplikasjoner. Denne brukes av Google Maps, Open Street Map, Bing Maps, Mapquest og mange andre.

##Kjært barn har mange navn...
*Web Mercator, Google Web Mercator, Spherical Mercator, WGS 84 Web Mercator, WGS 84/Pseuco-Mercator....*

##... og mange id'er
*EPSG:900913, EPSG:900913, EPSG:3785, EPSG:3857, EPSG:102113, EPSG:102100, EPSG:41001 og ESRI:54004*

##Korrekt i dag er: 

???

Mye enklere å beregne, men unøyaktig rundt polene

???

---
#UTM - Projeksjon
Universal Transverse Mercator coordinate system

I norge er UTM (sone 32 og 33) utbredt, og brukes i stor grad av blant annet Kartverket. Gir ett eget koordinatsystem (x,y) innefor hver "rute"


<br><br>
<div align="center">
<img src="img/utm-europa.png">
</div>

???

Forklare EPSG-navnet
The EPSG Geodetic Parameter Dataset is a structured dataset of Coordinate Reference Systems and Coordinate Transformations, accessible through this online registry

???

---

Oppgave: Hent et koordinat fra Google maps og zoom til koordinatet i OpenLayers kartet
Skamløs Trondheim-promotering i 10 min
---

#Markører og popup
Fortelle om hvordan dette gjøres i Leaflet

Torgeir viser frem Leaflet og OpenLayers API
Viser Popup i Leaflet (koder live)

##Oppgave 15 min
Gjør det samme i OpenLayers
---
#Andre kartservere
- geoserver
- geowebcache
#Kartlag (wms) som vises på toppen av grunnkartet (featurelag)
Kartlaget har annen projeksjon

TODO: Finn et featurelag

Sørg for at featurelaget først tegnes i feil projeksjon, og så korrigerer vi det 

##Oppgave:
Tegn inn featurelaget i Leaflet

Korriger featurelaget
---
#Datakilder
Snakke om geojson, andre ting..?

---
#Oppgave:
Hente fra REST-API, hente fra geojson-fil
**Kumlokk, etc

#Vise data fra en projeksjon sammen med data fra andre projeksjoner
Hvordan dette gjøres i Leaflet

##Oppgave
Lage oppgave for visning av andre data på topp av bakgrunnskart

Burde vi si noe om geojson først - eller sørge for at vi har en versjon som funger out of the box med geojson??
---
#Kartlag
Informasjon om hvordan vi legger et kartlag på toppen av bakgrunnskart 
*Beskrive at dette er måten vi bygger opp kart på*

##Oppgave
Hente et enkelt wms-kart (med samme projeksjon) som legges på toppen av Leaflet-kartet vårt.

---
#Datakilder
###Geoserver
###GeoWebCache
###ArcGIS
###OpenStreetMap
###Google

---
#Oppgave(r):
###Finne andre datakilder for å parse og vise i Leaflet

---

TODO enkle lenker til features i forskjellige koordinatsystem

- vise noe data som har riktig koordinatsystem i openlayers
- vis samme data i leaflet, som krever en annen projeksjon

## datakilder

Datakilder kan være

- rest api

- arcgis
- bekk ansatte bosted?

TODO artige datakilder
- ssb - http://data.ssb.no/api/
- vegkart - http://vegvesen.no/nvdb/api/

Gå gjennom

- geoserver
- rest api

### oppgaver

TODO her må vi lage oppgaver tilhørende hvert av datakildene og legge til rette for det i javascriptklienten (ajax ++)


# Extras, for de raske

## clustring av data?
## styling
## vise fylker og kommuner som er klikkbare
## vise obskure stats for forskjellige fylker kommuner
## tegning i kart, ta vare på geometrien

## hvilke kart?
- kartverket (åpent gråtonekart, kan hente bakgrunnskart i utm33 så vi får en annen projeksjon)
- open street maps 3
    </textarea>
    <script src="http://gnab.github.io/remark/downloads/remark-latest.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
  </body>
</html>
